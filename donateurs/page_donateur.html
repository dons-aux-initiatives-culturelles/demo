<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ANDIC ‚Äî Tableau de bord donateur (Prototype)</title>
<!-- Leaflet CSS -->
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>
<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">ANDIC</div>
      <div class="brand-text">
        <div class="title">ANDIC ‚Äî Mon espace donateur</div>
        <div class="subtitle">Soutenez la culture, suivez l'impact</div>
      </div>
    </div>

    <nav class="nav">
      <button id="btnNewDon" class="btn primary">Faire un don</button>
      <a href="#" id="btnHistory" class="link">Mes dons</a>
      <a href="#" id="btnReceipts" class="link">Mes re√ßus</a>
      <a href="#" id="btnExplore" class="link">Explorer</a>
    </nav>

    <div class="avatar">J</div>
  </header>

  <main class="container">

    <!-- Synth√®se -->
    <section class="synth">
      <div class="card small">
        <div class="label">Total donn√©</div>
        <div class="value">2 450 ‚Ç¨</div>
      </div>
      <div class="card small">
        <div class="label">Projets soutenus</div>
        <div class="value">8</div>
      </div>
      <div class="card small">
        <div class="label">Re√ßus disponibles</div>
        <div class="value">8</div>
      </div>
      <div class="card small">
        <div class="label">Impact estim√©</div>
        <div class="value">~ 12 800 b√©n√©fic.</div>
      </div>
    </section>

    <!-- Zone principale: faire un don -->
    <section class="main-card" id="don-section" aria-label="Faire un don">
      <h2>Faire un don</h2>
      <p class="muted">Choisissez un montant, r√©partissez-le entre niveaux territoriaux et projets cibl√©s.</p>

      <div class="don-grid">
        <!-- Left: amount + territorial sliders -->
        <div class="panel">
          <label class="field-label">Montant du don (‚Ç¨)</label>
          <div class="money-row">
            <input id="donAmount" type="number" min="1" step="1" value="100" />
            <div class="tax">Co√ªt net estim√© : <span id="netCost">34 ‚Ç¨</span></div>
          </div>

          <div class="divider">R√©partition territoriale (min 5% par niveau)</div>

          <div id="territorySliders" class="sliders">
            <!-- sliders generated by JS -->
          </div>

          <div class="divider">Projets / √©tablissements cibl√©s (facultatif)</div>
          <div class="controls">
            <button id="openSearch" class="btn outline">üîç Ajouter un projet</button>
            <button id="autoFill" class="btn ghost">Auto : r√©partition par d√©faut</button>
          </div>

          <div class="note small muted">
            Au moins <strong>25%</strong> sont toujours affect√©s aux 	 communs territoriaux (commune ‚Üí nation).
          </div>
        </div>

        <!-- Right: summary, selected projects, stacked bar -->
        <div class="panel">
          <div class="summary">
            <h3>R√©capitulatif</h3>
            <div class="stack" id="stackBar" aria-hidden="true">
              <!-- stacked segments -->
            </div>
            <div class="percent-row">
              <div>Total : <strong id="totalPercent">100%</strong></div>
              <div id="percentMsg" class="muted small"></div>
            </div>

            <div class="calc-list" id="amountList">
              <!-- lines generated by JS -->
            </div>

            <div class="actions">
              <button id="btnValidate" class="btn primary" disabled>Confirmer et valider mon don</button>
              <button id="btnPreview" class="btn outline">Aper√ßu du re√ßu</button>
            </div>
          </div>

          <hr />

          <div class="selected-projects">
            <h4>Projets cibl√©s</h4>
            <div id="selectedList" class="selected-list">
              <div class="small muted">Aucun projet cibl√© pour le moment.</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Explorer modal / project search -->
    <div id="modalSearch" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-inner">
        <button class="modal-close" id="closeSearch">‚úï</button>
        <h3>Ajouter un projet / √©tablissement</h3>
        <div class="search-row">
          <input id="projQuery" placeholder="Rechercher par nom, ville, type..." />
          <select id="projFilter">
            <option value="">Tous types</option>
            <option value="theatre">Th√©√¢tre</option>
            <option value="musique">Musique</option>
            <option value="mjc">MJC</option>
            <option value="patrimoine">Patrimoine</option>
          </select>
        </div>
		<section id="mapSection">
		<h2>Explorer les projets sur la carte</h2>
		<div id="map"></div>
		</section>
        <div id="projResults" class="results"></div>
      </div>
    </div>

    <!-- History / Receipts section -->
    <section class="panel" id="history-section">
      <h3>Historique des dons</h3>
      <div id="historyList" class="history-list">
        <!-- past donations populated by JS -->
      </div>
    </section>

  </main>

  <footer class="footer">
    <div>ANDIC ‚Äî Association Nationale de Dons aux Initiatives Culturelles</div>
    <div class="small muted">Contact : contact@andic.fr ‚Ä¢ Mentions l√©gales</div>
  </footer>
  
  
<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
<script src="script.js"></script>

</body>
</html>
